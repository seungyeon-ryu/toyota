!function(i,e,t){"use strict";if(!i.fn.viSlider)var d={stru:{},tabmenu:!0,tablink:!1,idca:!0,arrow:!0,dragable:!0,subtitle:!1};i.fn.viSlider=function(e){var n,l,s,a,o,r,u=i(this),c="object"==i.type(e)?i.extend({},d,e):d,f=0,v=0,h=[],p=[],g=!1,m=0;u.addClass("viSlider");var b={clickDepth:function(i){if(w.dimShow(),u.find(".viSlider-tabmenu").find("li").removeClass("current"),u.find(".viSlider-tabmenu").find("li").eq(i).addClass("current"),c.idca&&b.mk2depth(i),S.mkSlide(i),1==m)v=0,u.find("ul.viSlider-slide").css("left",0).stop(),u.find("ul.viSlider-indicate").find("li").removeClass("current").eq(0).addClass("current");else if(-1==m){v=c.stru[i].subcategory.length-1;var e=-v*u.find("ul.viSlider-slide").find("li").eq(v).width();u.find("ul.viSlider-slide").css("left",e).stop(),u.find("ul.viSlider-indicate").find("li").removeClass("current").eq(v).addClass("current")}m=0},mk1depth:function(){if(i("<ul></ul>").appendTo(u).addClass("viSlider-tabmenu"),c.tabmenu)for(var e=0;e<c.stru.length;e++)i("<li></li>").appendTo(u.find(".viSlider-tabmenu")).html('<a href="#" title="'+c.stru[e].title+'탭 메뉴 내용 보기">'+c.stru[e].title+"</a>").find("a").on("click",function(e){var t=u.find(".viSlider-tabmenu").find("li").index(i(this).parent());f=t,i(this).parent().siblings().removeClass("current"),i(this).parent().addClass("current"),c.idca&&b.mk2depth(t),S.mkSlide(t),v=0,u.find("ul.viSlider-slide").css("left",0),u.find("ul.viSlider-indicate").find("li").removeClass("current").eq(0).addClass("current"),w.eventClick(e)});u.find(".viSlider-tabmenu").find("li").eq(v).addClass("current"),c.idca&&b.mk2depth(v),c.arrow&&b.mkArrow(),S.mkSlide(v)},mk2depth:function(e){p=[],u.find(i("ul.viSlider-indicate")).length?u.find("ul.viSlider-indicate").html(""):i("<ul></ul>").appendTo(u).addClass("viSlider-indicate"),n=c.stru[e].subcategory.length;for(var t=0;t<c.stru[e].subcategory.length;t++)i("<li></li>").appendTo(u.find(".viSlider-indicate")).html('<a href="#" class="thumbnail" title="'+c.stru[e].subcategory[t].title+' 슬라이드 활성화"><img src="'+c.stru[e].subcategory[t].thumbnail+'"></a><a href="#" class="title" title="'+c.stru[e].subcategory[t].title+' 슬라이드 활성화">'+c.stru[e].subcategory[t].title+"</a>").find("a").on("click",function(e){v=u.find(".viSlider-indicate").find("li").index(i(this).parent()),i(this).parent().siblings().removeClass("current"),i(this).parent().addClass("current"),S.slideMotion(v),w.eventClick(e)})},mkArrow:function(){i('<a href="#"></a>').appendTo(u).addClass("arrowBtn prev"),i('<a href="#"></a>').appendTo(u).addClass("arrowBtn next"),u.find("a.arrowBtn").each(function(){var e=i(this);e.on("click",function(i){e.hasClass("prev")&&v>=1?(v-=1,S.slideMotion(v)):e.hasClass("prev")&&0==v&&c.tablink&&f>0&&(g=!0,r=0,m=-1,S.slideMotion(0)),e.hasClass("next")&&n-1>v?(v+=1,S.slideMotion(v)):e.hasClass("next")&&v==n-1&&c.tablink&&f<c.stru.length-1&&(g=!0,r=0,m=1,S.slideMotion(0)),w.eventClick(i)})})}},S={slideMotion:function(i){var e=u.find("ul.viSlider-slide"),t=u.find("ul.viSlider-slide").find("li").eq(i).width();e.stop().animate({left:-i*t},400,"easeOutQuint",function(){g=!1,0!==m&&(f>0&&-1==m?(f--,r=0,b.clickDepth(f)):f<c.stru.length-1&&1==m&&(f++,r=0,b.clickDepth(f)))}),u.find("ul.viSlider-indicate").find("li").removeClass("current").eq(v).addClass("current")},mkSlide:function(e){u.find(i("ul.viSlider-slide")).length?u.find("ul.viSlider-slide").html(""):(i("<div></div>").appendTo(u).addClass("viSlider-slideWrap"),i("<ul></ul>").appendTo(u.find(".viSlider-slideWrap")).addClass("viSlider-slide"));for(var d=0;d<c.stru[e].subcategory.length;d++){if(10>d)var n="0"+(d+1);else var n=d+1;var l="",s="";c.subtitle&&(c.stru[e].subcategory[d].descript==t||null==c.stru[e].subcategory[d].descript?l='<div class="subtitle"><h3>'+c.stru[e].subcategory[d].subtitle+"</h3></div>":(s="<p>"+c.stru[e].subcategory[d].descript+"</p>",l='<div class="subtitle"><h3>'+c.stru[e].subcategory[d].subtitle+"</h3>"+s+"</div>")),i("<li></li>").appendTo(u.find(".viSlider-slide")).css({"background-image":'url("'+c.stru[e].subcategory[d].orgImage+'")',backgroundSize:"cover"}).html('<span class="indexNumber">'+n+"</span>").append(l).append('<div class="cont3_pop"><div class="cont3_popInner"><p>'+c.stru[e].subcategory[d].popupText+"</p>"+"</div>"+'<button class="slide_popClose"><img src="image/slide_popClose.png" alt="" class="wt100"></button>'+"</div>"),p[d]=c.stru[e].subcategory[d].orgImage}S.sortSlide(),u.find(".viSlider-indicate").find("li").eq(v).addClass("current"),u.find(".viSlider-indicate").find("li").eq(0).addClass("firstli"),u.find(".viSlider-indicate").find("li").eq(c.stru[e].subcategory.length-1).addClass("lastli"),i(".subtitle > p").on("click",function(){var e=i(this).closest("li");e.addClass("slide_popView")}),i(".slide_popClose").on("click",function(){i(this).closest("li").removeClass("slide_popView")})},sortSlide:function(){var e=new Image;e.onload=function(){e.width,s=u.width()*(e.height/e.width),u.height(s),u.find(".viSlider-slide").find("li").height(s),c.stru.length>1&&c.tablink&&(l=u.find("ul.viSlider-slide").find("li").eq(0).width(),i('<div class="slideTo next"></div>').appendTo(u.find("ul.viSlider-slide").find("li").eq(n-1)).html("<div></div>").css({position:"absolute",left:"100%",top:0,width:"100%",height:"100%",overflow:"hidden"}).find("div").css({position:"absolute",width:"100%",top:"50%"}),i('<div class="slideTo prev"></div>').appendTo(u.find("ul.viSlider-slide").find("li").eq(0)).html("<div></div>").css({position:"absolute",right:"100%",top:0,width:"100%",height:"100%",overflow:"hidden"}).find("div").css({position:"absolute",top:"50%",width:"100%","text-align":"right"}))},e.src=p[0],u.find(".viSlider-slide").find("li").each(function(e){var t=i(this);h[e]=e*u.width(),t.css("left",e*u.width()),t.width(u.width())})},dragging:function(i){var e=u.find("ul.viSlider-slide");if(e.addClass("keydown"),c.tablink){var t=.05*l-l/i;1>t&&(t=1)}i>0?e.position().left>-1*h[n-1]?e.css({left:a-i}):e.position().left<=-1*h[n-1]&&c.tablink&&f<c.stru.length-1?(e.position().left>-1*(h[n-1]+.5*l)&&(e.css({left:a-i}),e.find(".slideTo.next > div").css({left:t})),e.position().left>-1*(h[n-1]+.3*l)?(e.find(".slideTo.next").removeClass("active").find(">div").html("끌어<br>당기세요."),m=0):(e.find(".slideTo.next").addClass("active").find(">div").html("놓으면 다음탭으로<br> 이동됩니다."),m=1)):e.css({left:-1*h[n-1]}):e.position().left<0?e.css({left:a-i}):e.position().left>=0&&c.tablink&&f>0?(e.position().left<0+.5*l&&(e.css({left:a-i}),e.find(".slideTo.prev > div").css({right:t})),e.position().left<0+.3*l?(e.find(".slideTo.prev").removeClass("active").find(">div").html("끌어<br>당기세요."),m=0):(e.find(".slideTo.prev").addClass("active").find(">div").html("놓으면 이전탭으로<br> 이동됩니다."),m=-1)):e.css({left:0})},dragEnd:function(i){u.find("ul.viSlider-slide").removeClass("keydown"),0!==i&&(i>.1*u.width()?(v+=Math.ceil(i/u.width()),v>=n-1&&(v=n-1),g=!0,r=0,S.slideMotion(v)):(g=!0,r=0,S.slideMotion(v)),i<u.width()*-.1?(v+=Math.floor(i/u.width()),0>v&&(v=0),g=!0,r=0,S.slideMotion(v)):(g=!0,r=0,S.slideMotion(v)))}},w={eventClick:function(i){i.preventDefault?i.preventDefault():i.returnValue=!1},windResize:function(){i(window).resize(function(){h=[],S.sortSlide(),S.slideMotion(v)})},dimShow:function(){u.find("div.SlideDim").length<=0?i('<div class="SlideDim"></div>').appendTo(u).css({"background-color":"#000",position:"absolute",left:0,top:0,width:"100%",height:"100%","z-index":5}).stop().fadeOut(1e3,function(){i(this).remove()}):u.find("div.SlideDim").stop().css("opacity","1").fadeOut(1e3,function(){i(this).remove()})}},C={touchFunc:function(){"ontouchstart"in window?(u.bind("touchstart",function(e){var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];o=t.pageX,a=u.find("ul.viSlider-slide").position().left,i(this).bind("touchmove",function(i){var e=i.originalEvent.touches[0]||i.originalEvent.changedTouches[0],t=o-e.pageX;r=t,g||S.dragging(r)})}),u.bind("touchend",function(){i(this).unbind("touchmove"),g||S.dragEnd(r)})):(u.mousedown(function(e){i(this).bind("mousemove"),o=e.pageX,a=u.find("ul.viSlider-slide").position().left,i(this).mousemove(function(i){var e=o-i.pageX;r=e,g||S.dragging(r)})}),u.mouseleave(function(){i(this).unbind("mousemove"),g||S.dragEnd(r)}),u.mouseup(function(){i(this).unbind("mousemove"),g||S.dragEnd(r)}))}};b.mk1depth(),w.windResize(),c.dragable&&C.touchFunc()}}(window.jQuery,window);